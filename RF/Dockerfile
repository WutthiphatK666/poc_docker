FROM gliderlabs/alpine:3.3

# Dependency versions
ENV ALPINE_GLIBC 2.31-r0
ENV AWS_CLI_VERSION 1.20.6
ENV AXE_SELENIUM_LIBRARY_VERSION 2.1.6
ENV BROWSER_LIBRARY_VERSION 6.0.0
ENV CHROMIUM_VERSION 86.0
ENV DATABASE_LIBRARY_VERSION 1.2.4
ENV DATADRIVER_VERSION 1.4.1
ENV DATETIMETZ_VERSION 1.0.6
ENV FAKER_VERSION 5.0.0
ENV FIREFOX_VERSION 78
ENV FTP_LIBRARY_VERSION 1.9
ENV GECKO_DRIVER_VERSION v0.26.0
ENV IMAP_LIBRARY_VERSION 0.4.0
ENV PABOT_VERSION 2.0.1
ENV REQUESTS_VERSION 0.9.1
ENV ROBOT_FRAMEWORK_VERSION 4.1
ENV SELENIUM_LIBRARY_VERSION 5.1.3
ENV SSH_LIBRARY_VERSION 3.7.0
ENV XVFB_VERSION 1.20
ENV JSON_LIBRARY_VERSION 0.31
ENV HTTP3_LIBRARY_VERSION 0.6

RUN apk-install bash py-pip firefox xvfb dbus chromium chromium-chromedriver
RUN pip3 install --upgrade pip
RUN pip3 install robotframework==$ROBOT_FRAMEWORK_VERSION
RUN pip3 install robotframework-seleniumlibrary==$SELENIUM_LIBRARY_VERSION
RUN pip3 install robotframework-jsonlibrary==$JSON_LIBRARY_VERSION
RUN pip3 install robotframework-requests==$REQUESTS_VERSION
RUN pip3 install robotframework-httplibrary3==$HTTP3_LIBRARY_VERSION
RUN pip3 install PyYAML

ADD run.sh /usr/local/bin/run.sh
RUN chmod +x /usr/local/bin/run.sh

CMD ["run.sh"]
